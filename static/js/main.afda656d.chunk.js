(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{43:function(e,a,t){e.exports=t(74)},50:function(e,a,t){},51:function(e,a,t){},52:function(e,a,t){},53:function(e,a,t){},57:function(e,a,t){},62:function(e,a,t){},63:function(e,a,t){},64:function(e,a,t){},65:function(e,a,t){},66:function(e,a,t){},71:function(e,a,t){},74:function(e,a,t){"use strict";t.r(a);var n=t(0),l=t.n(n),r=t(32),c=t.n(r),m=(t(50),t(51),t(52),t(53),t(18)),i=t.n(m);const s=Object(n.createContext)(),o=e=>{let{reducer:a,initialState:t,children:r}=e;return l.a.createElement(s.Provider,{value:Object(n.useReducer)(a,t)},r)},u=()=>Object(n.useContext)(s),d=e=>null===e||void 0===e?void 0:e.reduce((e,a)=>a.price+e,0);var E=(e,a)=>{switch(console.log(a),a.type){case"ADD_TO_BASKET":return{...e,basket:[...e.basket,a.item]};case"EMPTY_BASKET":return{...e,basket:[]};case"REMOVE_FROM_BASKET":const t=e.basket.findIndex(e=>e.id===a.id);let n=[...e.basket];return t>=0?n.splice(t,1):console.warn("Cant remove product (id: ${action.id}) as its not in the basket!"),{...e,basket:n};case"SET_USER":return{...e,user:a.user};default:return e}},p=t(3);var g=function(){const e=Object(p.o)(),[{basket:a},t]=u();return l.a.createElement("div",{className:"subtotal"},l.a.createElement(i.a,{renderText:a=>l.a.createElement(l.a.Fragment,null,l.a.createElement("p",null," ",l.a.createElement("small",null,"CART SUMMARY")," "),l.a.createElement("p",{className:"subtotal_price"},l.a.createElement("small",null,"Subtotal")," ",l.a.createElement("p",null,a)),l.a.createElement("small",{className:"subtotal_gift"},l.a.createElement("input",{type:"checkbox"})," This order contains a gift"),l.a.createElement("button",{onClick:a=>e("/payment")},"CHECK OUT (",a,")")),decimalScale:2,value:d(a),displayType:"text",thousandSeparator:!0,prefix:"$"}))},h=(t(57),t(33)),_=t.n(h);var v=function(e){let{id:a,image:t,title:n,price:r,rating:c,hideButton:m}=e;const[{basket:i},s]=u();return l.a.createElement("div",{className:"checkoutProduct"},l.a.createElement("div",{className:"checkoutProduct_wrap"},l.a.createElement("img",{className:"checkoutProduct_image",src:t}),l.a.createElement("div",{className:"checkoutProduct_info"},l.a.createElement("p",{className:"checkoutProduct_title"},n),l.a.createElement("div",{className:"checkoutProduct_rating"},Array(c).fill().map((e,a)=>l.a.createElement("p",null,"\u2b50")))),l.a.createElement("div",{className:"price_div"},l.a.createElement("p",{className:"checkoutProduct_price"},l.a.createElement("strong",null,l.a.createElement("small",null,"$"),r)))),!m&&l.a.createElement("div",{onClick:()=>{s({type:"REMOVE_FROM_BASKET",id:a})},className:"checkoutProduct_remove"},l.a.createElement(_.a,null),l.a.createElement("p",null,"Remove")))};var b=function(){const[{basket:e,user:a},t]=u();return l.a.createElement("div",{className:"checkout"},l.a.createElement("div",{className:"checkout_left"},l.a.createElement("img",{className:"checkout_ad",src:"https://slimfast.com/wp-content/uploads/2023/08/SlimFast-Keto-to-Delights-Website-Banner-Desktop.jpg",alt:""}),l.a.createElement("div",null,l.a.createElement("h3",null,"Hello, ",null===a||void 0===a?void 0:a.email),l.a.createElement("h2",{className:"checkout_title"},"Shopping Cart (",e.length,")"),e.map(e=>l.a.createElement(v,{key:e.id,id:e.id,title:e.title,image:e.image,price:e.price,rating:e.rating})))),l.a.createElement("div",{className:"checkout_right"},l.a.createElement(g,null)))},S=(t(62),t(36)),N=t.n(S),k=t(37),y=t.n(k),f=t(10),O=t(35),T=t(14),C=t(15);const j=Object(O.a)({apiKey:"AIzaSyBz3pAEyUhH_lur7FRL40wpB_KMckeK2KE",authDomain:"e-kart-challange.firebaseapp.com",projectId:"e-kart-challange",storageBucket:"e-kart-challange.appspot.com",messagingSenderId:"585516772155",appId:"1:585516772155:web:8094a3a9d626ffd0cfa51e",measurementId:"G-TGHR5EDCKZ"}),I=Object(T.b)(j),A=Object(C.c)(j);var w=function(){const[{basket:e,user:a},t]=u();return l.a.createElement("div",{className:"header"},l.a.createElement(f.b,{to:"/"},l.a.createElement("img",{className:"header_logo",src:"https://i.ibb.co/X79jgMY/Ekart.png",alt:"Ekart",border:"0"})),l.a.createElement("div",{className:"header_search"},l.a.createElement("input",{className:"header_searchInput",type:"text"}),l.a.createElement(N.a,{className:"header_searchIcon"})),l.a.createElement("div",{className:"header_nav"},l.a.createElement(f.b,{to:!a&&"/login"},l.a.createElement("div",{onClick:()=>{a&&I.signOut()},className:"header_option"},l.a.createElement("span",{className:"header_optionLineOne"},"Hello ",a?a.email:"Guest"),l.a.createElement("span",{className:"header_optionLineTwo"},a?"Sign Out":"Sign In"))),l.a.createElement(f.b,{to:"/orders"},l.a.createElement("div",{className:"header_option"},l.a.createElement("span",{className:"header_optionLineOne"},"Returns"),l.a.createElement("span",{className:"header_optionLineTwo"},"& Orders"))),l.a.createElement("div",{className:"header_option"},l.a.createElement("span",{className:"header_optionLineOne"},"Your"),l.a.createElement("span",{className:"header_optionLineTwo"},"Prime")),l.a.createElement(f.b,{to:"/checkout"},l.a.createElement("div",{className:"header_optionBasket"},l.a.createElement(y.a,null),l.a.createElement("span",{className:"header_optionLineTwo header_basketCount"},null===e||void 0===e?void 0:e.length)))))};t(63),t(64);var M=function(e){let{id:a,title:t,image:n,price:r,rating:c}=e;const[{basket:m},i]=u();return l.a.createElement("div",{className:"product"},l.a.createElement("div",{className:"product_info"},l.a.createElement("p",null,t),l.a.createElement("p",{className:"product_price"},l.a.createElement("small",null,"$"),l.a.createElement("strong",null,r)),l.a.createElement("div",{className:"product_rating"},Array(c).fill().map((e,a)=>l.a.createElement("p",null,"\u2b50")))),l.a.createElement("img",{src:n,alt:""}),l.a.createElement("button",{onClick:()=>{i({type:"ADD_TO_BASKET",item:{id:a,title:t,image:n,price:r,rating:c}})}},"Add To Cart"))};var R=function(){return l.a.createElement("div",{className:"home"},l.a.createElement("div",{className:"home_container"},l.a.createElement("img",{className:"home_image",src:"https://m.media-amazon.com/images/W/MEDIAX_792452-T1/images/I/61GfWyQax7L._SX3000_.jpg"}),l.a.createElement("div",{className:"home_row"},l.a.createElement(M,{id:"2343561",title:"Corsair Dark Core RGB Pro SE, FPS/MOBA Gaming Mouse with SLIPSTREAM Technology, Black, Backlit RGB LED, 18000 DPI, Optical, Qi wireless charging certified",price:79.99,image:"https://m.media-amazon.com/images/W/MEDIAX_792452-T1/images/I/61RdgVQ43TL._AC_SY355_.jpg",rating:5}),l.a.createElement(M,{id:"6768761",title:"MSI QHD Rapid-IPS Quantum DOT Gaming Non-Glare Super Narrow Bezel 1ms 2560 x 1440 165Hz Refresh Rate Adjustable Arm G-Sync Compatible 27\u201d Gaming Monitor (Optix MAG274QRF-QD),Black",price:319.99,image:"https://m.media-amazon.com/images/W/MEDIAX_792452-T1/images/I/41WNOeu8OFL._AC_SY200_.jpg",rating:4})),l.a.createElement("div",{className:"home_row"},l.a.createElement(M,{id:"8943561",title:"The Book of Unusual Knowledge Hardcover \u2013 Lay Flat, April 1, 2012",price:79.99,image:"https://m.media-amazon.com/images/W/MEDIAX_792452-T1/images/I/71WC3z4Wt0L._SY342_.jpg",rating:4}),l.a.createElement(M,{id:"2343561",title:"Verbatim 8GB Premium SDHC Memory Card, UHS-I V10 U1 Class 10, Blue (96318)",price:7.99,image:"https://m.media-amazon.com/images/W/MEDIAX_792452-T1/images/I/717lQv8CYFL._AC_SY355_.jpg",rating:5}),l.a.createElement(M,{id:"8564561",title:"Smart Watches for Men Activity Trackers and Smartwatches Alexa Built-in Smartwatch Make/Answer Call Smart Watch for Men Compatible with iOS & Android Heart Rate Sleep Tracking Mens Smart Watch",price:59.77,image:"https://m.media-amazon.com/images/W/MEDIAX_792452-T1/images/I/71nPKVoFV6L.__AC_SX300_SY300_QL70_FMwebp_.jpg",rating:3})),l.a.createElement("div",{className:"home_row"},l.a.createElement(M,{id:"70953561",title:"Tochinkar Wireless Retro Gaming Console(64G), Plug & Play Video TV Game Stick with Built-in 9 Emulators, 20,000+ Video Games,4K HDMI Output, Revisit Classic Games with Dual 2.4G Wireless Controllers",price:45.97,image:"https://m.media-amazon.com/images/W/MEDIAX_792452-T1/images/I/71Xb9amI4bL._AC_SX425_.jpg",rating:5}))))};t(65);var D=function(){const e=Object(p.o)(),[a,t]=Object(n.useState)(""),[r,c]=Object(n.useState)(""),m=Object(T.b)();return l.a.createElement("div",{className:"login"},l.a.createElement(f.b,{to:"/"},l.a.createElement("img",{className:"login_logo",src:"https://i.ibb.co/fG0RrCN/Ekart-black.png",alt:"Ekart",border:"0"})),l.a.createElement("div",{className:"login_container"},l.a.createElement("h1",null,"Sign in"),l.a.createElement("form",null,l.a.createElement("h5",null,"Email"),l.a.createElement("input",{type:"email",value:a,onChange:e=>t(e.target.value)}),l.a.createElement("h5",null,"Password"),l.a.createElement("input",{type:"password",value:r,onChange:e=>c(e.target.value)}),l.a.createElement("button",{type:"submit",onClick:t=>{t.preventDefault(),Object(T.c)(m,a,r).then(a=>{a&&e("/")}).catch(e=>alert(e.message))},className:"login_signinButton"},"Sign In")),l.a.createElement("p",null,"By continuing, you agree to Ekart's Conditions of Use and Privacy Notice."),l.a.createElement("div",{className:"login_registerdiv"},l.a.createElement("p",null,l.a.createElement("small",null,"New to Ekart?")),l.a.createElement("button",{onClick:t=>{t.preventDefault(),Object(T.a)(m,a,r).then(a=>{a&&e("/")}).catch(e=>alert(e.message))},className:"login_registerbutton"},"Create your Ekart account"))))},B=(t(66),t(16));var P=t(84).a.create({baseURL:"http://127.0.0.1:5001/e-kart-challange/us-central1/api"});var L=function(){const[{basket:e,user:a},t]=u(),r=Object(p.o)(),c=Object(B.useStripe)(),m=Object(B.useElements)(),[s,o]=Object(n.useState)(!1),[E,g]=Object(n.useState)(""),[h,_]=Object(n.useState)(null),[b,S]=Object(n.useState)(!0),[N,k]=Object(n.useState)(!0);return Object(n.useEffect)(()=>{(async()=>{try{const a=await P.post("/payments/create?total=".concat(100*d(e)));console.log("THIS IS THE RESPONSE",a),k(a.data.clientSecret)}catch(h){console.log("THIS IS THE ERROR",h)}})()},[e]),console.log("THE SECRET IS >>>",N),l.a.createElement("div",{className:"payment"},l.a.createElement("div",{className:"payment_container"},l.a.createElement("h1",null,"Checkout (",l.a.createElement(f.b,{to:"/checkout"},null===e||void 0===e?void 0:e.length),")"),l.a.createElement("div",{className:"payment_section"},l.a.createElement("div",{className:"payment_title"},l.a.createElement("h3",null,"Delivery Address")),l.a.createElement("div",{className:"payment_address"},l.a.createElement("p",null,null===a||void 0===a?void 0:a.email),l.a.createElement("p",null,"2019 Biashara Lane"),l.a.createElement("p",null,"Murang'a, Kenya"))),l.a.createElement("div",{className:"payment_section"},l.a.createElement("div",{className:"payment_title"},l.a.createElement("h3",null,"Review items and Delivery")),l.a.createElement("div",{className:"payment_items"},e.map(e=>l.a.createElement(v,{id:e.id,title:e.title,image:e.image,price:e.price,rating:e.rating})))),l.a.createElement("div",{className:"payment_section"},l.a.createElement("div",{className:"payment_title"},l.a.createElement("h3",null,"Payment Method")),l.a.createElement("div",{className:"payment_details"},l.a.createElement("form",{onSubmit:async n=>{n.preventDefault(),g(!0),await c.confirmCardPayment(N,{payment_method:{card:m.getElement(B.CardElement)}}).then(async n=>{let{paymentIntent:l}=n;const c=Object(C.b)(A,"users","".concat(null===a||void 0===a?void 0:a.uid)),m=Object(C.b)(Object(C.a)(c,"orders"),l.id);try{await Object(C.d)(m,{basket:e,amount:l.amount,created:l.created}),console.log("Data added successfully!"),o(!0),_(null),g(!1),t({type:"EMPTY_BASKET"}),r("/orders",{replace:!0})}catch(h){console.error("Error adding order:",h)}})}},l.a.createElement(B.CardElement,{onChange:e=>{S(e.empty),_(e.error?e.error.message:"")}}),l.a.createElement("div",{className:"payment_pricecontainer"},l.a.createElement(i.a,{renderText:e=>l.a.createElement("h3",null,"Order Total: ",e),decimalScale:2,value:d(e),displayType:"text",thousandSeparator:!0,prefix:"$"}),l.a.createElement("button",{disabled:E||b||s},l.a.createElement("span",null,E?l.a.createElement("p",null,"Processing"):"Buy Now"))),h&&l.a.createElement("div",null,h))))))},G=(t(71),t(38)),x=t.n(G);var F=function(e){let{order:a}=e;if(!a||!a.data||!a.data.created||!a.data.basket)return console.log("Order Object",a),null;const t=x.a.unix(a.data.created.seconds).format("MMMM Do YYYY, h:mma");return l.a.createElement("div",{className:"order"},l.a.createElement("h1",null,"Your Orders"),l.a.createElement("p",null,t),l.a.createElement("p",{className:"order_id"},l.a.createElement("small",null,a.id)),a.data.basket.map(e=>l.a.createElement(v,{key:e.id,id:e.id,title:e.title,image:e.image,price:e.price,rating:e.rating,hideButton:!0})),l.a.createElement(i.a,{renderText:e=>l.a.createElement("h3",{className:"order_total"},"Order Total: ",e),decimalScale:2,value:a.data.amount/100,displayType:"text",thousandSeparator:!0,prefix:"$"}))},H=t(39);const W=Object(H.a)("pk_test_51OYszYE0o3He6TzpkytX8z4lvabWqIGFtb0dDGg3mOgVHCmej4ChomUzHyoRDCPQNDE1yEXhjaJVcCNv3SRC2VsJ00MoTUOWh8");var Y=function(){const[{},e]=u();return Object(n.useEffect)(()=>{I.onAuthStateChanged(a=>{console.log("THE USER IS >>>",a),e(a?{type:"SET_USER",user:a}:{type:"SET_USER",user:null})})},[]),l.a.createElement(f.a,null,l.a.createElement("div",{className:"app"},l.a.createElement(p.c,null,l.a.createElement(p.a,{index:!0,path:"/",element:l.a.createElement(l.a.Fragment,null,l.a.createElement(w,null),l.a.createElement(R,null))}),l.a.createElement(p.a,{path:"/checkout",element:l.a.createElement(l.a.Fragment,null,l.a.createElement(w,null),l.a.createElement(b,null))}),l.a.createElement(p.a,{path:"/login",element:l.a.createElement(D,null)}),l.a.createElement(p.a,{path:"/payment",element:l.a.createElement(l.a.Fragment,null,l.a.createElement(w,null),l.a.createElement(B.Elements,{stripe:W},l.a.createElement(L,null)))}),l.a.createElement(p.a,{path:"/orders",element:l.a.createElement(l.a.Fragment,null,l.a.createElement(w,null),l.a.createElement(F,null))}))))};var K=e=>{e&&e instanceof Function&&t.e(3).then(t.bind(null,85)).then(a=>{let{getCLS:t,getFID:n,getFCP:l,getLCP:r,getTTFB:c}=a;t(e),n(e),l(e),r(e),c(e)})};c.a.createRoot(document.getElementById("root")).render(l.a.createElement(l.a.StrictMode,null,l.a.createElement(o,{initialState:{basket:[]},reducer:E},l.a.createElement(Y,null)))),K()}},[[43,1,2]]]);
//# sourceMappingURL=main.afda656d.chunk.js.map